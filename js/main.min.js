function isElementOnScreen(o){if(document.getElementById(o)){var e=document.getElementById(o),t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0}}function uiInits(){$(document).width(),$("#restartStoryButton").click(function(){restartStory()}),$("#publicLandsLegendBox").css("background-color",publicLandsColor),$("#privateInholdingsLegendBox").css("background-color",privateHighlight),$("#publicSwapsLegendBox").css("background-color",publicHighlightColor)}function getMoveParams(o){return moveParams={},boxTop=$("#"+o).position().top,boxBottom=$("#"+o).position().bottom,boxHeight=$("#"+o).height(),scrollTop=$(document).scrollTop(),winHeight=$(window).height(),moveParams.startPoint=1.25*boxHeight+boxTop,moveParams.endPoint=1.25*boxHeight+winHeight+boxTop,moveParams.disScrolled=scrollTop-moveParams.startPoint,moveParams.prcScrolled=moveParams.disScrolled/(winHeight+boxHeight+.15*winHeight),moveParams.prcScrolled<0&&(moveParams.prcScrolled=0),moveParams.prcScrolled>1&&(moveParams.prcScrolled=1),moveParams}window.onbeforeunload=function(){window.scrollTo(0,0)},window.scrollTo(0,0);var activeMapEvent=null;eventNames=Object.keys(events),window.onscroll=function(){for(var o=0;o<eventNames.length;o++){var e=eventNames[o];if(isElementOnScreen(e)&&activeMapEvent!==e){events[e](),activeMapEvent=e;break}}},$(document).ready(function(){mapInits(),uiInits()});